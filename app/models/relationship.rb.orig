class Relationship < ActiveRecord::Base
  
  # issues have an owner
  belongs_to :user  
  
  belongs_to :issue
  belongs_to :cause, :class_name => 'Issue', :foreign_key => 'cause_id'

  has_many :references, :dependent => :destroy
<<<<<<< HEAD:app/models/relationship.rb

  belongs_to :user
  #validates :user_id, :presence => true
=======
>>>>>>> 46306024baba2b203deb5a24f2f4bd36f30a5dcf:app/models/relationship.rb

  validates :issue_id, :presence => true, :uniqueness => {:scope => :cause_id}
  has_paper_trail 

def validate
  errors.add_to_base('Cannot be a cause/effect of itself!') if issue_id == cause_id
end

end
